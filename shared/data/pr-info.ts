/**
 * Shared PR Information Data
 * Source of truth for PR metadata, summaries, and group descriptions
 */

export interface PRInfo {
  id: string;
  number: number;
  title: string;
  version: string;
  description: string;
  status: string;
  author: string;
  timestamp: string;
  groupCount?: number;
  totalFiles?: number;
  additions?: number;
  deletions?: number;
  githubUrl?: string;
  avatar?: { type: 'image' | 'letter'; src?: string; letter?: string };
  summary?: string[];
  descriptionBlocks?: Array<{ type: 'text' | 'image'; content: string }>;
  groups?: Array<{
    name: string;
    description: string;
    reviewFocus?: string;
    files?: string[];
  }>;
}

export const pr35Info: PRInfo = {
  id: '35',
  number: 35,
  title: 'SC-40624 GH client to allow posting and fetching comments',
  version: '88f51b24',
  description: 'Adds comprehensive GitHub PR review comments integration with new DTOs, HTTP client implementation, service layer, and full test coverage. Includes controller refactoring to use PR info resolver pattern and configuration updates.',
  status: 'passed',
  author: 'OrlovAlexander85',
  timestamp: '3 hours ago',
  groupCount: 6,
  totalFiles: 27,
  additions: 1281,
  deletions: 493,
  githubUrl: 'https://github.com/SonarSource/sonarcloud-was-infra/pull/82',
  avatar: { type: 'image', src: 'https://i.pravatar.cc/150?img=12' },
  descriptionBlocks: [
    { type: 'text', content: 'GET' },
    { type: 'image', content: '/pr35-1.png' },
    { type: 'text', content: 'POST' },
    { type: 'image', content: '/pr35-2.png' },
    { type: 'image', content: '/pr35-3.png' },
  ],
  groups: [
    {
      name: 'GitHub PR Comment DTOs & Data Models',
      description: 'Added data transfer objects for GitHub PR review comments API integration. These DTOs handle the serialization/deserialization of GitHub API responses and requests for posting review comments on pull requests.'
    },
    {
      name: 'GitHub Client Implementation & Service Logic',
      description: 'Implemented HTTP client for GitHub API communication with rate limiting and authentication. Added service layer with business logic for posting and fetching PR review comments, including validation and metrics integration.'
    },
    {
      name: 'GitHub Client Tests & Mock Implementation',
      description: 'Added comprehensive test suite with 469 lines of test coverage. Includes unit tests for GitHub client with rate limit scenarios, service layer tests, and mock implementations. Removed 3 obsolete deprecated test files.'
    },
    {
      name: 'PR Info Resolution Service Layer',
      description: 'Created service layer for resolving PR information using resolver pattern. Includes caching mechanism, integration with analysis repository, and GitHub client for fetching PR metadata and review comments.'
    },
    {
      name: 'Analysis Service & SCM Webhook Processing',
      description: 'Updated analysis service to support asynchronous PR analysis with event publishing. Added webhook processor for handling SCM events with validation and filtering logic, plus REST endpoint for webhook events.'
    },
    {
      name: 'Integration Tests & E2E Workflow Tests',
      description: 'Added end-to-end integration tests covering the full PR review workflow. Includes tests for GitHub API integration, PR review flow scenarios, and test fixtures (JSON payloads) for webhook and PR review responses.'
    }
  ]
};

export const pr34Info: PRInfo = {
  id: '34',
  number: 34,
  title: 'SC-41123 Expose review focus, when the groups are generated by Claude',
  version: 'c5822109',
  description: 'The API now returns a "focus" field in the PR diff groups response. This field contains AI-generated review guidance that helps reviewers understand what to focus on when reviewing each file group. For example, the focus might instruct: "Review the UserService changes for correctness and side effects. Verify application.yml configuration changes align with service modifications and don\'t introduce security or performance issues." This enhancement provides contextual guidance generated by Claude AI to make code reviews more efficient and thorough.',
  status: 'passed',
  author: 'John Smith',
  timestamp: '5 hours ago',
  groupCount: 4,
  totalFiles: 15,
  additions: 409,
  deletions: 87,
  githubUrl: 'https://github.com/SonarSource/sonarcloud-was-infra/pull/87',
  avatar: { type: 'letter', letter: 'J' },
  descriptionBlocks: [
    { type: 'text', content: 'Focus is returned now' },
    { type: 'image', content: '/pr34-1.png' },
  ],
  groups: [
    {
      name: 'OpenAPI Specification Updates',
      description: 'Updated API specification to include new fields for AI-generated review focus. Added review_focus (string) and generated_by (enum: CLAUDE, MANUAL) fields to the PR diff groups response schema.'
    },
    {
      name: 'Service Layer Modifications',
      description: 'Modified PrDiffGroupingService to populate review_focus field from Claude AI responses. Includes logic for handling AI-generated vs manual grouping scenarios with appropriate field population.'
    },
    {
      name: 'Test Coverage & Validation',
      description: 'Added comprehensive unit and integration tests for new API fields. Includes tests for Claude-generated groups, manual groups, edge cases, and validation of OpenAPI contract compliance.'
    },
    {
      name: 'Infrastructure Updates',
      description: 'Updated CloudFormation and Terraform snapshots across dev, staging, and production environments. Ensures infrastructure configurations are aligned with API changes for seamless deployment.'
    }
  ]
};

export const pr33Info: PRInfo = {
  id: '33',
  number: 33,
  title: 'SC-39117 Common branch for lambda -> container',
  version: 'e99ee76e',
  description: 'Migrates quality-gates services from AWS Lambda to containerized ECS deployment. Performance tested at 80 RPS on Dev with ~350ms avg latency; Lambda currently handles ~69 RPS (250k req/hr peak). Prod deploys two ECS tasks providing 160+ RPS capacity with CPU-based auto-scaling. Rollback strategy uses dual API Gateway deployment — external traffic can be re-routed in minutes by switching Custom Domain targets; internal requests require SSM param update and ReportProcessor restart.',
  status: 'passed',
  author: 'Ivan Petrov',
  timestamp: '3 days ago',
  groupCount: 13,
  totalFiles: 84,
  additions: 2341,
  deletions: 876,
  githubUrl: 'https://github.com/SonarSource/sonarcloud-quality-gates/pull/296',
  avatar: { type: 'letter', letter: 'I' },
  descriptionBlocks: [
    { type: 'text', content: 'To validate:\n☑ Switchover to lambda in case of issues\n☑ E2E passing' },
    { type: 'text', content: 'Performance tuning' },
    { type: 'text', content: 'I made performance tests on Dev hitting this endpoint with 80 requests per second and got the avg latency ~350 ms (and decreasing due to dependencies not being warm as well...). In prod we will have 2x capacity as we deploy two tasks instead of one. This is specifically so we can fine-tune it later if we over-provision. I want to make sure we do not under-provision.' },
    { type: 'text', content: 'In fact reducing the number of RPS is not reducing the latency meaning that the service is not the blocker when it comes to response times (rather Dev DB or dependant services)' },
    { type: 'text', content: 'You can see that the lambda is getting max 250k requests per hour, that is 69 RPS. With two tasks and bigger DB in Prod we will be able to handle at least 160 RPS and scale out in case of increase in CPU utilization.' },
    { type: 'image', content: '/pr33-1.png' },
    { type: 'text', content: 'Switchover' },
    { type: 'text', content: 'We will deploy two API GWs as part of this merge so we are able to revert very quickly by just changing the path in API Gateway Custom Domains:' },
    { type: 'image', content: '/pr33-2.png' },
    { type: 'text', content: '@ross-bragg-sonarsource has validated that we are able to switch back and traffic will be re-routed in minutes.' },
    { type: 'text', content: 'This concerns external requests, internal requests are harder to rollback and we would need to edit the value of SSM param and restart ReportProcessor or any other consumer (while we are deploying rollback). What I would suggest in this case is to edit API GW manually and target lambda instead of VPC Link (while we are deploying rollback).' },
    { type: 'text', content: 'Please follow the checklist before asking reviews. If you have any question, please contact sc-platform squad\n\n☑ The only env variables accepted to deploy are ENV_NAME, ENV_TYPE and BUILD_NUMBER\n☑ No application secrets should be stored in Vault\n☑ Run a destroy of all services -> you should not have resources with status DELETE_SKIPPED\n☑ Insert the architecture diagram into the README\n☑ Fill the dependency table from the README\n☑ Update the SonarCloud Deployment Tree diagram and inform SC-platform squad of your udpdate' },
  ],
  groups: [
    {
      name: 'CI/CD Pipeline & Workflow Configuration',
      description: 'Updates to GitHub Actions workflows for build and deployment processes',
      reviewFocus: 'Review deployment workflow changes for container migration. Verify new workflow steps maintain proper deployment sequences and environment configurations. Check for any breaking changes in deployment triggers.',
      files: [
        '.github/workflows/build.yml',
        '.github/workflows/labeled-deployment.yml',
        '.github/workflows/services-deployment-with-e2e-tests.yml',
        '.github/workflows/services-deployment.yml',
      ]
    },
    {
      name: 'Container Migration & Docker Configuration',
      description: 'Dockerfile updates and deployment scripts for lambda-to-container migration',
      reviewFocus: 'Examine Dockerfile changes for base image, build stages, and runtime config. Review deploy-from-local.sh script for deployment procedures. Ensure container configurations align with AWS ECS requirements.',
      files: [
        'quality-gates/quality-gates-lambda/Dockerfile',
        'quality-gates/deploy-from-local.sh',
      ]
    },
    {
      name: 'Infrastructure & AWS ECS Service Setup',
      description: 'New ECS service definitions and infrastructure templates for container deployment',
      reviewFocus: 'Verify ECS service configuration including task definitions, load balancers, and auto-scaling. Review infrastructure-as-code changes in platform service files. Check resource allocation and networking setup for containers.',
      files: [
        'quality-gates/quality-gates-platform/sonarcloud/quality_gates/quality_gates_platform/ecs_service.py',
        'quality-gates/quality-gates-platform/sonarcloud/quality_gates/quality_gates_platform/service.py',
        'quality-gates/quality-gates-platform/sonarcloud/quality_gates/quality_gates_platform/app.py',
        'quality-gates-events/quality-gates-events-platform/sonarcloud/quality_gates_events/quality_gates_events_platform/service.py',
      ]
    },
    {
      name: 'App Config: Lambda to Container Migration',
      description: 'Application configuration updates for container runtime environment and JMS messaging',
      reviewFocus: 'Review application.yml changes for container profile configurations, JMS queue settings, and endpoint mappings. Verify container-specific configs in application-container.yml. Check logging configuration updates in logback.xml.',
      files: [
        'quality-gates/quality-gates-lambda/src/main/resources/application.yml',
        'quality-gates/quality-gates-lambda/src/main/resources/application-container.yml',
        'quality-gates/quality-gates-lambda/src/main/resources/logback.xml',
        'quality-gates-evaluation/quality-gates-evaluation-lambda/src/main/resources/application.yml',
        'quality-gates-events/quality-gates-events-lambda/src/main/resources/application.yml',
        'quality-gates/quality-gates-lambda/src/test/resources/application.yml',
      ]
    },
    {
      name: 'Event Processing Refactor & JMS Listener',
      description: 'Refactored event handling from Lambda handler to service layer with new JMS listener for container',
      reviewFocus: 'Review SharedEventsProcessor extraction from SharedEventsHandler for service layer separation. Examine new SharedEventsJmsListener for message consumption in containerized environment. Verify event processing logic remains unchanged.',
      files: [
        'quality-gates-events/quality-gates-events-lambda/src/main/java/io/sonarcloud/qualitygate/event/SharedEventsHandler.java',
        'quality-gates-events/quality-gates-events-lambda/src/main/java/io/sonarcloud/qualitygate/event/service/SharedEventsProcessor.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/listener/SharedEventsJmsListener.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/listener/package-info.java',
      ]
    },
    {
      name: 'Event Processing Tests Refactor',
      description: 'Updated tests for refactored event processing service layer',
      reviewFocus: 'Ensure test coverage migrated from handler tests to new SharedEventsProcessorTest. Verify SharedEventsHandlerTest updated to reflect delegation pattern. Check SharedEventsJmsListenerTest covers message consumption scenarios.',
      files: [
        'quality-gates-events/quality-gates-events-lambda/src/test/java/io/sonarcloud/qualitygate/event/SharedEventsHandlerTest.java',
        'quality-gates-events/quality-gates-events-lambda/src/test/java/io/sonarcloud/qualitygate/event/service/SharedEventsProcessorTest.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/listener/SharedEventsJmsListenerTest.java',
      ]
    },
    {
      name: 'Authorization Service Refactor',
      description: 'Major refactoring of AuthorizationService with related test updates',
      reviewFocus: 'Review AuthorizationService changes for logic improvements and interface modifications. Ensure authorization logic correctness is maintained. Verify comprehensive test coverage in AuthorizationServiceTest addresses all refactored scenarios.',
      files: [
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/authorization/AuthorizationService.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/authorization/AuthorizationServiceTest.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/authorization/BeanTestFactory.java',
      ]
    },
    {
      name: 'API Controllers Update for Container Runtime',
      description: 'Controller modifications for container deployment compatibility',
      reviewFocus: 'Check controller endpoint changes and dependency injection updates. Verify controllers work with both Lambda and container runtimes. Review removal of priming resource and UsersClientFactory changes for architectural consistency.',
      files: [
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/PrivateProjectAssociationsController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/PrivateQualityGateConditionsController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/PrivateQualityGateController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/PrivateQualityGateDefaultsController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/PrivateQualityGateSettingsController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/PrivateQualityGateStatusesController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/ProjectAssociationsController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/QualityGateConditionsController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/QualityGateController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/QualityGateDefaultsController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/QualityGateSettingsController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/controller/QualityGateStatusesController.java',
        'quality-gates-evaluation/quality-gates-evaluation-lambda/src/main/java/io/sonarcloud/qualitygate/evaluation/controller/PrivateQualityGatesEvaluationController.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/PrimingResource.java',
        'quality-gates/quality-gates-lambda/src/main/java/io/sonarcloud/qualitygate/http/client/user/UsersClientFactory.java',
      ]
    },
    {
      name: 'Integration Tests Refactor',
      description: 'Comprehensive updates to integration tests for container compatibility',
      reviewFocus: 'Verify integration tests updated for new authentication mechanism using JwtTestHelper. Check test setup changes in abstract base classes. Ensure all IT classes maintain coverage while adapting to refactored authorization and controller layers.',
      files: [
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/AbstractConditionsControllerIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/AbstractProjectAssociationsControllerIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/AbstractQualityGateControllerIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/AbstractQualityGateDefaultsControllerIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/AbstractQualityGateSettingsControllerIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/ControllerBaseIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/JwtTestHelper.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/ConditionsControllerDeleteIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/ConditionsControllerGetIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/ConditionsControllerPatchIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/ConditionsControllerPostIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/ProjectAssociationsControllerDeleteByOrgIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/ProjectAssociationsControllerDeleteIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/ProjectAssociationsControllerGetIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/ProjectAssociationsControllerPostIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/QualityGateControllerDeleteIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/QualityGateControllerGetIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/QualityGateControllerPatchIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/QualityGateControllerPostIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/QualityGateDefaultsControllerGetIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/QualityGateDefaultsControllerPatchIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/QualityGateSettingsControllerGetIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/QualityGateSettingsControllerPatchIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/QualityGateStatusesControllerGetIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/qualitygate/it/interdomaincommunication/InterDomainCommunicationIT.java',
        'quality-gates/quality-gates-lambda/src/test/java/io/sonarcloud/PrimingResourceTest.java',
      ]
    },
    {
      name: 'Authentication Model Cleanup',
      description: 'Removal of RequestIdentity and RequestIdentityProvider classes with related tests',
      reviewFocus: 'Verify these authentication classes are fully replaced by alternative mechanism. Ensure no remaining references exist. Confirm new authentication approach in controllers and tests adequately replaces removed functionality.',
      files: [
        'quality-gates/shared/src/main/java/io/sonarcloud/authentication/RequestIdentity.java',
        'quality-gates/shared/src/main/java/io/sonarcloud/authentication/RequestIdentityProvider.java',
        'quality-gates/shared/src/test/java/io/sonarcloud/authentication/RequestIdentityProviderTest.java',
      ]
    },
    {
      name: 'OpenAPI Specs & Infrastructure Snapshots',
      description: 'New Lambda API definitions and updated infrastructure snapshot tests for all environments',
      reviewFocus: 'Review new openapi-lambda.yaml for API contract changes. Compare openapi.yaml modifications. Verify infrastructure snapshot changes reflect expected ECS resources, networking, and service configurations across Dev/Staging/Prod.',
      files: [
        'quality-gates/quality-gates-platform/api-definitions/openapi-lambda.yaml',
        'quality-gates/quality-gates-platform/api-definitions/openapi.yaml',
        'quality-gates/quality-gates-platform/tests/__snapshots__/test_snapshots/test_full_template_with_snapshot[Dev].json',
        'quality-gates/quality-gates-platform/tests/__snapshots__/test_snapshots/test_full_template_with_snapshot[Prod].json',
        'quality-gates/quality-gates-platform/tests/__snapshots__/test_snapshots/test_full_template_with_snapshot[Staging].json',
        'quality-gates-events/quality-gates-events-platform/tests/__snapshots__/test_snapshots/test_full_template_with_snapshot[Dev].json',
        'quality-gates-events/quality-gates-events-platform/tests/__snapshots__/test_snapshots/test_full_template_with_snapshot[Prod].json',
        'quality-gates-events/quality-gates-events-platform/tests/__snapshots__/test_snapshots/test_full_template_with_snapshot[Staging].json',
      ]
    },
    {
      name: 'Build Config & Dependency Updates',
      description: 'Gradle build file and dependency version updates',
      reviewFocus: 'Review build.gradle changes for new dependencies supporting container runtime and JMS. Check libs.versions.toml for version updates. Ensure dependency changes are compatible and don\'t introduce security vulnerabilities.',
      files: [
        'gradle/libs.versions.toml',
        'quality-gates/quality-gates-lambda/build.gradle',
        'quality-gates-evaluation/quality-gates-evaluation-lambda/build.gradle',
      ]
    },
    {
      name: 'Platform Test Updates',
      description: 'Python platform test modifications for infrastructure changes',
      reviewFocus: 'Verify test_app.py, test_service.py, and test_snapshots.py properly validate new ECS infrastructure. Ensure tests cover container service configuration, networking, and deployment scenarios for quality gates platform.',
      files: [
        'quality-gates/quality-gates-platform/tests/test_app.py',
        'quality-gates/quality-gates-platform/tests/test_service.py',
        'quality-gates/quality-gates-platform/tests/test_snapshots.py',
      ]
    },
  ]
};

// Helper function to get PR info by ID
export function getPRInfo(prId: string): PRInfo | null {
  switch (prId) {
    case '35': return pr35Info;
    case '34': return pr34Info;
    case '33': return pr33Info;
    default: return null;
  }
}

// Returns all PRs in display order (newest first)
export function getAllPRs(): PRInfo[] {
  return [pr35Info, pr34Info, pr33Info];
}
